// Smart Billing App - Single Page (React + HTML + CSS + Magic UI)

import React, { useState, useEffect } from 'react'; import { Html5QrcodeScanner } from 'html5-qrcode'; import { Button } from '@/components/ui/button'; import { Card, CardContent } from '@/components/ui/card'; import './App.css';

const App = () => { const [cameraId, setCameraId] = useState(null); const [scanner, setScanner] = useState(null); const [products, setProducts] = useState([]); const [total, setTotal] = useState(0); const [showAccount, setShowAccount] = useState(false); const [customer, setCustomer] = useState({ first: '', last: '', phone: '', store: '' });

useEffect(() => { Html5QrcodeScanner.getCameras().then(devices => { if (devices.length) { setCameraId(devices[0].id); } }); }, []);

const startScanner = () => { if (cameraId) { const html5QrCode = new Html5QrcodeScanner("reader", { fps: 10, qrbox: 250 }); html5QrCode.render( result => handleScan(result), error => console.warn(error) ); setScanner(html5QrCode); } };

const handleScan = (code) => { const knownProducts = { '901030865169': { name: 'Surf Excel', price: 120 }, '123456789012': { name: 'Lux Soap', price: 35 }, };

if (knownProducts[code]) {
  const item = knownProducts[code];
  const tax = item.price * 0.05;
  const totalItem = item.price + tax;
  setProducts([...products, { ...item, tax, total: totalItem }]);
  setTotal(prev => prev + totalItem);
} else {
  alert('Unknown Product Scanned');
}

};

const handleAccountSubmit = (e) => { e.preventDefault(); setShowAccount(false); alert('Account created successfully!'); };

return ( <div className="app"> <header className="header"> <h1>EVS Smart Billing</h1> <Button onClick={() => setShowAccount(true)}>Click here to open your account</Button> </header>

{showAccount && (
    <Card className="account-form">
      <CardContent>
        <form onSubmit={handleAccountSubmit}>
          <input type="text" placeholder="First Name" required onChange={e => setCustomer({ ...customer, first: e.target.value })} />
          <input type="text" placeholder="Last Name" required onChange={e => setCustomer({ ...customer, last: e.target.value })} />
          <input type="text" placeholder="Phone Number" required onChange={e => setCustomer({ ...customer, phone: e.target.value })} />
          <input type="text" placeholder="Store Name" required onChange={e => setCustomer({ ...customer, store: e.target.value })} />
          <Button type="submit">Create Account</Button>
        </form>
      </CardContent>
    </Card>
  )}

  <div id="reader" className="scanner-box"></div>
  <Button onClick={startScanner}>Start Scanner</Button>

  <table className="bill-table">
    <thead>
      <tr>
        <th>Item</th>
        <th>Rate</th>
        <th>Tax</th>
        <th>Total</th>
      </tr>
    </thead>
    <tbody>
      {products.map((prod, index) => (
        <tr key={index}>
          <td>{prod.name}</td>
          <td>₹{prod.price}</td>
          <td>₹{prod.tax.toFixed(2)}</td>
          <td>₹{prod.total.toFixed(2)}</td>
        </tr>
      ))}
    </tbody>
  </table>

  <h3>Total Amount: ₹{total.toFixed(2)}</h3>
</div>

); };

export default App;

